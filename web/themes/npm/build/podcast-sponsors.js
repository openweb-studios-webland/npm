(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["podcast-sponsors"],{

/***/ "./web/themes/npm/assets/scripts/modules/podcast-sponsors.js":
/*!*******************************************************************!*\
  !*** ./web/themes/npm/assets/scripts/modules/podcast-sponsors.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PodcastSponsors; });\n/* harmony import */ var _utilities_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/debounce */ \"./web/themes/npm/assets/scripts/utilities/debounce.js\");\n/* harmony import */ var _utilities_slugify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/slugify */ \"./web/themes/npm/assets/scripts/utilities/slugify.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar PodcastSponsors = function PodcastSponsors(_el) {\n  var _this = this;\n\n  _classCallCheck(this, PodcastSponsors);\n\n  _defineProperty(this, \"init\", function () {\n    _this.attachEventListeners();\n\n    _this.getSearchParams();\n  });\n\n  _defineProperty(this, \"attachEventListeners\", function () {\n    _this.resetTrigger.addEventListener('click', _this.onReset);\n\n    _this.loadMoreTrigger.addEventListener('click', _this.onLoadMore);\n\n    _this.podcastsInput.addEventListener('change', _this.onPodcasts);\n\n    _this.hasOfferInput.addEventListener('change', _this.onHasOffer);\n\n    _this.keywordsInput.addEventListener('keyup', Object(_utilities_debounce__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(function (e) {\n      _this.onKeywords(e);\n    }, 300));\n  });\n\n  _defineProperty(this, \"onPodcasts\", function (e) {\n    _this.page = 1;\n    var value = e.target.value;\n\n    if (value && value !== '') {\n      var selectedOption = e.target.querySelector('option:checked');\n      _this.filters[_this.params.podcasts] = selectedOption.dataset.podcastSponsorsSlug || value.toLowerCase();\n    } else {\n      delete _this.filters[_this.params.podcasts];\n    }\n\n    _this.filterItems();\n  });\n\n  _defineProperty(this, \"onHasOffer\", function (e) {\n    if (e.target.checked) {\n      _this.filters[_this.params.hasOffer] = 1;\n    } else {\n      delete _this.filters[_this.params.hasOffer];\n    }\n\n    _this.filterItems();\n  });\n\n  _defineProperty(this, \"onKeywords\", function (e) {\n    var value = e.target.value;\n\n    if (value && value !== '') {\n      _this.filters[_this.params.keywords] = value;\n    } else {\n      delete _this.filters[_this.params.keywords];\n    }\n\n    _this.filterItems();\n  });\n\n  _defineProperty(this, \"onReset\", function (e) {\n    _this.filters = {};\n    _this.page = 1; // Reset field values\n\n    _this.podcastsInput.selectedIndex = 0;\n    _this.hasOfferInput.checked = false;\n    _this.keywordsInput.value = '';\n\n    _this.filterItems();\n\n    e.preventDefault();\n  });\n\n  _defineProperty(this, \"onLoadMore\", function (e) {\n    _this.page++;\n\n    _this.filterItems();\n\n    e.preventDefault();\n  });\n\n  _defineProperty(this, \"filterItems\", function () {\n    _this.toggleLoading(true);\n\n    _this.setSearchParams();\n\n    Object.entries(_this.filters).length > 0 ? _this.filterItemsBySelectors() : _this.filterItemsByLength();\n\n    _this.toggleLoading();\n  });\n\n  _defineProperty(this, \"filterItemsByLength\", function () {\n    var itemsCount = 0;\n\n    for (var i = 0; i < _this.items.length; i++) {\n      var item = _this.items[i];\n      var itemParent = item.closest('[data-podcast-sponsors-item]');\n      var activeItemParent = itemParent !== prevItemParent ? false : activeItemParent;\n\n      if (_this.hasMoreItems(itemsCount)) {\n        item.classList.remove('hidden'); // Update items count only once per item parent\n\n        if (!activeItemParent) {\n          activeItemParent = true;\n          itemsCount++;\n        }\n\n        itemParent.classList.remove('hidden');\n      } else {\n        if (!activeItemParent) {\n          item.classList.add('hidden');\n          itemParent.classList.add('hidden');\n        }\n      } // Store previous item parent to account for siblings\n\n\n      var prevItemParent = itemParent;\n    }\n\n    _this.toggleAlert(itemsCount === 0);\n\n    var showMore = _this.hasMoreItems(itemsCount) || _this.hasMoreItems(_this.items.length);\n\n    _this.toggleLoadMore(showMore);\n  });\n\n  _defineProperty(this, \"filterItemsBySelectors\", function () {\n    var itemsCount = 0;\n\n    for (var i = 0; i < _this.items.length; i++) {\n      var item = _this.items[i];\n      var itemParent = item.closest('[data-podcast-sponsors-item]');\n      var activeItemParent = itemParent !== prevItemParent ? false : activeItemParent;\n      var visibleItemsCount = itemParent !== prevItemParent ? 0 : visibleItemsCount;\n\n      if (_this.hasMoreItems(itemsCount) && _this.itemHasOffer(item) && _this.itemMatchesRegExp(item, _this.podcastsInput.value) && _this.itemMatchesRegExp(item, _this.keywordsInput.value)) {\n        item.classList.remove('hidden'); // Update items count only once per item parent\n\n        if (!activeItemParent) {\n          activeItemParent = true;\n          itemsCount++;\n        }\n\n        itemParent.classList.remove('hidden'); // Update visible items count\n\n        visibleItemsCount++;\n\n        _this.updateItemsCount(itemParent, visibleItemsCount);\n      } else {\n        item.classList.add('hidden');\n\n        if (!activeItemParent) {\n          itemParent.classList.add('hidden');\n        }\n      } // Store previous item parent to account for siblings\n\n\n      var prevItemParent = itemParent;\n    }\n\n    _this.toggleAlert(itemsCount === 0);\n\n    _this.toggleLoadMore(_this.hasMoreItems(itemsCount));\n  });\n\n  _defineProperty(this, \"hasMoreItems\", function (itemsCount) {\n    return itemsCount < _this.page * _this.itemsPerPage;\n  });\n\n  _defineProperty(this, \"itemMatchesRegExp\", function (item) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    value = String(value).toLowerCase();\n    var regExp = new RegExp('\\\\b\\\\w*' + _this.escapeRegExp(value) + '\\\\w*\\\\b', 'i');\n    return regExp.test(item.dataset.podcastSponsorsKeywords);\n  });\n\n  _defineProperty(this, \"escapeRegExp\", function (string) {\n    string = string.replace(/\\./g, '');\n    string = string.replace(/!/g, '');\n    string = string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    return string;\n  });\n\n  _defineProperty(this, \"itemHasOffer\", function (item) {\n    return _this.hasOfferInput.checked ? item.dataset.podcastSponsorsHasOffer === 'yes' : true;\n  });\n\n  _defineProperty(this, \"updateItemsCount\", function (item, count) {\n    var el = item.querySelector('[data-podcast-sponsors-count]');\n    el.innerHTML = count > 1 ? \"\".concat(count, \" Codes\") : \"\".concat(count, \" Code\");\n  });\n\n  _defineProperty(this, \"getSearchParams\", function () {\n    var pathname = location.pathname.split('/').slice(2, 3).toString();\n\n    if (pathname !== '') {\n      _this.filters[_this.params.podcasts] = pathname.replace(/-/g, ' ');\n    }\n\n    var params = location.search;\n\n    if (params !== '') {\n      params = params.substring(1);\n      params = params.split('&');\n      params.forEach(function (param) {\n        param = param.split('=');\n        _this.filters[param[0]] = param[1].replace(/-/g, ' ');\n      });\n    }\n\n    _this.filterItems();\n  });\n\n  _defineProperty(this, \"setSearchParams\", function () {\n    var pathname = location.pathname.split('/').slice(0, 2).join('/');\n    var url = \"\".concat(location.protocol, \"//\").concat(location.host).concat(pathname, \"/\"); // MAYBE REMOVE?\n\n    var filters = Object.entries(_this.filters); // If filters are selected\n\n    if (_typeof(_this.filters) === 'object' && filters.length > 0) {\n      var params = '';\n      var hasParams = false;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = filters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              key = _step$value[0],\n              value = _step$value[1];\n\n          if (key === 'podcasts') {\n            url += \"\".concat(Object(_utilities_slugify__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(value), \"/\");\n          } else {\n            var separator = hasParams ? '&' : '?';\n            params += \"\".concat(separator).concat(key, \"=\").concat(encodeURI(value));\n            hasParams = true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      url += params;\n    } // Push to brwoser history\n\n\n    history.pushState(null, null, url);\n  });\n\n  _defineProperty(this, \"toggleLoadMore\", function () {\n    var loadMore = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    loadMore ? _this.loadMoreTrigger.parentNode.classList.add('hidden') : _this.loadMoreTrigger.parentNode.classList.remove('hidden');\n  });\n\n  _defineProperty(this, \"toggleAlert\", function () {\n    var alert = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (alert) {\n      _this.alert.classList.remove('hidden');\n\n      _this.alert.innerHTML = \"Sorry, we couldn't find any matching promo codes.\";\n    } else {\n      _this.alert.classList.add('hidden');\n    }\n  });\n\n  _defineProperty(this, \"toggleLoading\", function () {\n    var loading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    loading ? _this.loading.classList.remove('hidden') : _this.loading.classList.add('hidden');\n  });\n\n  this.el = _el;\n  this.items = _toConsumableArray(this.el.querySelectorAll('[data-podcast-sponsors-keywords]'));\n  this.podcastsInput = this.el.querySelector('[data-podcast-sponsors-podcasts-input]');\n  this.hasOfferInput = this.el.querySelector('[data-podcast-sponsors-has-offer-input]');\n  this.keywordsInput = this.el.querySelector('[data-podcast-sponsors-keywords-input]');\n  this.resetTrigger = this.el.querySelector('[data-podcast-sponsors-reset-trigger]');\n  this.loadMoreTrigger = this.el.querySelector('[data-podcast-sponsors-load-more-trigger]');\n  this.alert = this.el.querySelector('[data-podcast-sponsors-alert]');\n  this.loading = this.el.querySelector('[data-podcast-sponsors-loading]');\n  this.filters = {};\n  this.params = {\n    podcasts: 'podcasts',\n    hasOffer: 'has-offer',\n    keywords: 'keywords'\n  };\n  this.page = 1;\n  this.itemsPerPage = 15;\n  this.init();\n};\n\n\n\n//# sourceURL=webpack:///./web/themes/npm/assets/scripts/modules/podcast-sponsors.js?");

/***/ }),

/***/ "./web/themes/npm/assets/scripts/utilities/debounce.js":
/*!*************************************************************!*\
  !*** ./web/themes/npm/assets/scripts/utilities/debounce.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (callback, wait) {\n  var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var timeout = null;\n  return function () {\n    var _this = this,\n        _arguments = arguments;\n\n    var now = immediate && !timeout;\n\n    var result = function result() {\n      return callback.apply(_this, _arguments);\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(result, wait);\n\n    if (now) {\n      result();\n    }\n  };\n});\n\n//# sourceURL=webpack:///./web/themes/npm/assets/scripts/utilities/debounce.js?");

/***/ }),

/***/ "./web/themes/npm/assets/scripts/utilities/slugify.js":
/*!************************************************************!*\
  !*** ./web/themes/npm/assets/scripts/utilities/slugify.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (function (string) {\n  var a = 'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;';\n  var b = 'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';\n  var p = new RegExp(a.split('').join('|'), 'g');\n  return string.toString().toLowerCase().replace(/\\s+/g, '-') // Replace spaces with -\n  .replace(p, function (c) {\n    return b.charAt(a.indexOf(c));\n  }) // Replace special characters\n  .replace(/&/g, '-and-') // Replace & with 'and'\n  .replace(/[^\\w\\-]+/g, '') // Remove all non-word characters\n  .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n  .replace(/^-+/, '') // Trim - from start of text\n  .replace(/-+$/, ''); // Trim - from end of text\n});\n\n//# sourceURL=webpack:///./web/themes/npm/assets/scripts/utilities/slugify.js?");

/***/ })

}]);