{% set block = block ?? null %}

{% if block %}
  <section class="bg-gradient" data-label="services">
    <div class="flex flex-wrap items-center -mb-50 -mx-30 relative">
      <div class="mb-50 px-50 w-full lg:px-30 lg:w-1/4">
        <div class="text-white lg:pl-60">
          {% if block.heading %}
            <h2 class="heading-4">
              {{ block.heading }}
            </h2>
          {% endif %}

          {% if block.text %}
            <div class="text">
              {{ block.text }}
            </div>
          {% endif %}

          {% if block.button_link and block.button_text %}
            <a
              class="arrow mt-20 text-white"
              href="{{ block.button_link }}"
              data-track-gtm="Call to Action|{{ current_url }}|{{ block.button_text }}:{{ block.button_link }}"
            >
              {{ block.button_text }}
              {{ svg('arrow-right') }}
            </a>
          {% endif %}
        </div>
      </div>

      {% if block.services | length %}
        <div class="mb-50 px-30 w-full lg:w-3/4">
          <div class="overflow-hidden px-40 relative lg:pl-20 lg:pr-100">
            <div data-module="carousel" data-carousel-loop="false">
              <div class="carousel-track flex relative -mx-10 py-50 md:py-75 lg:py-100" data-carousel-track>
                {% for service in block.services %}
                  <div class="carousel-item flex-0 px-10 w-full md:w-1/2 lg:w-1/3" data-carousel-item>
                    {% include '_blocks/services/service.twig' ignore missing %}
                  </div>
                {% endfor %}
              </div>

              <div class="flex justify-center mb-50 -mx-5 relative z-10 md:mb-75 lg:justify-end lg:mb-100">
                <div class="px-5">
                  {% include '_partials/carousel/button-prev.twig' ignore missing with {
                    classes: 'opacity-50 text-white transition-fast hover:opacity-100',
                  } only %}
                </div>

                <div class="px-5">
                  {% include '_partials/carousel/button-next.twig' ignore missing with {
                    classes: 'opacity-50 text-white transition-fast hover:opacity-100',
                  } only %}
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    </div>
  </section>
{% endif %}
